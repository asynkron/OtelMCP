# `Migrations` Context

Entity Framework Core migration history for `OtelReceiverContext` lives here. Use it to understand schema evolution.

- `20240328140942_First*` – initial schema introducing tables for spans, logs, metrics metadata (`SpanAttributes`, `SpanNames`, `ComponentMetaData`, `UserSettings`). Earlier revisions targeted PostgreSQL so the designer annotations remain, but the runtime now exclusively uses SQLite.
- `20240329181635_snapshots*` – adds the `Snapshots` table for persisted TraceLens models.
- `OtelReceiverContextModelSnapshot.cs` – current EF model snapshot generated by EF Core; updates automatically when migrations are added.
- `20250929172403_LogAttributeIndexing*` – removes the `Logs` attribute arrays, adds the `LogAttributes` index table (capturing resource + record attributes), and ensures span indexes align with the entity annotations.
- `20250930042101_SpanAttributeNormalization*` – introduces the `SpanAttributeValues` table (with indexes mirroring `LogAttributes`) so span filters can be evaluated directly in SQL and enforced by provider-specific bulk insert paths.

Whenever you adjust the data model, generate a new migration and summarise it here to keep this change log actionable. Coordinate with [`../Data/context.md`](../Data/context.md) so both code and schema references stay aligned.
